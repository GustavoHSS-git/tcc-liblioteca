// Função para validar email
function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

// Função para mostrar mensagens de erro
function showError(message) {
    // Remove mensagem anterior se existir
    const existingError = document.querySelector('.error-message');
    if (existingError) {
        existingError.remove();
    }

    // Cria nova mensagem de erro
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message';
    errorDiv.style.cssText = `
        background-color: #ffebee;
        color: #c62828;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 15px;
        font-size: 14px;
        border-left: 4px solid #c62828;
    `;
    errorDiv.textContent = message;

    // Insere a mensagem antes do botão
    const loginBtn = document.querySelector('.login-btn');
    loginBtn.parentNode.insertBefore(errorDiv, loginBtn);

    // Remove a mensagem após 5 segundos
    setTimeout(() => {
        if (errorDiv.parentNode) {
            errorDiv.remove();
        }
    }, 5000);
}

// Função para mostrar mensagens de sucesso
function showSuccess(message) {
    // Remove mensagem anterior se existir
    const existingSuccess = document.querySelector('.success-message');
    if (existingSuccess) {
        existingSuccess.remove();
    }

    // Cria nova mensagem de sucesso
    const successDiv = document.createElement('div');
    successDiv.className = 'success-message';
    successDiv.style.cssText = `
        background-color: #e8f5e8;
        color: #2e7d32;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 15px;
        font-size: 14px;
        border-left: 4px solid #4caf50;
    `;
    successDiv.textContent = message;

    // Insere a mensagem antes do botão
    const loginBtn = document.querySelector('.login-btn');
    loginBtn.parentNode.insertBefore(successDiv, loginBtn);

    // Remove a mensagem após 5 segundos
    setTimeout(() => {
        if (successDiv.parentNode) {
            successDiv.remove();
        }
    }, 5000);
}

// Função principal de login
function handleLogin() {
    // Obtém os valores dos campos
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();

    // Validação dos campos
    if (!email) {
        showError('Por favor, insira seu email.');
        document.getElementById('email').focus();
        return;
    }

    if (!isValidEmail(email)) {
        showError('Por favor, insira um email válido.');
        document.getElementById('email').focus();
        return;
    }

    if (!password) {
        showError('Por favor, insira sua senha.');
        document.getElementById('password').focus();
        return;
    }

    if (password.length < 6) {
        showError('A senha deve ter pelo menos 6 caracteres.');
        document.getElementById('password').focus();
        return;
    }

    // Simula processo de login
    const loginBtn = document.querySelector('.login-btn');
    const originalText = loginBtn.textContent;
    
    // Mostra estado de carregamento
    loginBtn.textContent = 'Entrando...';
    loginBtn.disabled = true;
    loginBtn.style.opacity = '0.7';

    // Simula delay de requisição
    setTimeout(() => {
        // Restaura o botão
        loginBtn.textContent = originalText;
        loginBtn.disabled = false;
        loginBtn.style.opacity = '1';

        // Simula login bem-sucedido
        showSuccess('Login realizado com sucesso! Bem-vindo(a)!');
        
        // Limpa os campos após sucesso
        document.getElementById('email').value = '';
        document.getElementById('password').value = '';
        
        // Em uma aplicação real, aqui você redirecionaria o usuário
        console.log('Login realizado para:', email);
    }, 1500);
}

// Adiciona eventos quando a página carrega
document.addEventListener('DOMContentLoaded', function() {
    // Permite envio do formulário com Enter
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleLogin();
            }
        });
    });

    // Adiciona evento ao link "Esqueci a senha"
    const forgotPasswordLink = document.querySelector('.forgot-password');
    forgotPasswordLink.addEventListener('click', function(e) {
        e.preventDefault();
        alert('Funcionalidade "Esqueci a senha" seria implementada aqui.\n\nEm uma aplicação real, isso abriria um formulário para recuperação de senha.');
    });

    // Remove mensagens de erro quando o usuário começa a digitar
    inputs.forEach(input => {
        input.addEventListener('input', function() {
            const errorMessage = document.querySelector('.error-message');
            if (errorMessage) {
                errorMessage.remove();
            }
        });
    });
});

